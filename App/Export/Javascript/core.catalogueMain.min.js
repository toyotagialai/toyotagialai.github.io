$(document).ready(function(){function r(a){var e="",t=1;return $("."+a+":checkbox:checked").each(function(){e+=1===t?$(this).val():","+$(this).val(),t++}),e}function e(){var s=""===$("#hdCurrentPage").val()?1:$("#hdCurrentPage").val(),a=r("chkYear"),e=r("ckCat"),g=$(".page_catalogue .list-catalogue .row"),t=$("#hdApiUrl").val(),n=toyotaDealerLog();$.ajax({type:"GET",url:t+"/api/DetailMain/GetListCatalogue?iPageCurr="+s+"&sModelsCar="+e+"&sYear="+a,headers:{Authorization:"X-XSRF-Token "+n,"X-XSRF-Token":n,"Content-Type":"application/json"},success:function(a){var e=a.iCountPage,t="";if(0<a.lCatalog.length)for(var n=0;n<a.lCatalog.length;n++){var l=subStringSmarter(a.lCatalog[n].exT_FILE_NAME,25," "),o=(subStringSmarter(a.lCatalog[n].exT_FILE_DESC,50," "),new Date(a.lCatalog[n].exT_DATE)),i=o.getDate(),r=o.getMonth()+1;i<10&&(i="0"+i),r<10&&(r="0"+r);o.getFullYear();var c="tai-file/?url=/data/news/"+a.lCatalog[n].newS_ID+"/ext/"+a.lCatalog[n].exT_FILE_IMAGE;t+='<div class="col m4 s6"><div class="item">    <div class="item__media">       <img class="lazy" src="/Content/images/notfound/notfound-thumb-gallery.png?w=278&h=168&mode=crop" data-original="'+("/data/news/"+a.lCatalog[n].newS_ID+"/"+a.lCatalog[n].newS_IMG+"?w=278&h=168&mode=crop")+'" alt="'+l+'" />    </div>    <div class="item__txt">       <div class="item__txt__1">           <span class="file-size">'+l+'</span>           <span class="button-download">              <a href='+c+' target="_blank">Táº£i</a>          </span>      </div>   </div> </div></div>'}$(g).empty(),$(t).appendTo(g),$(".pagination").empty(),1<e&&$.ajax({url:"/get-html-result?_sotrang="+e+"&_page="+s,type:"GET",success:function(a){$(a).appendTo(".pagination")}}),$("img.lazy").lazyload({effect:"fadeIn",threshold:200}),1==d&&$("body, html").animate({scrollTop:$("#content").offset().top},500)}});var l="catalogue?page="+s+"&years="+a+"&cats="+e,o=document.getElementsByTagName("title")[0].innerHTML;changeUrlWithOutRefreshPage(l,o)}var d=0;$(".pagination").on("click",".paggingMain",function(){d=1;var a=$(this).data("page");$("#hdCurrentPage").val(a),e()}),$("body").on("change",".ckDeclareNew",function(){d=1,$("#hdCurrentPage").val(1),e()}),$(".chkYear").on("change",function(){var a,i,e,t;a=r("chkYear"),i=r("ckCat"),e=$("#hdApiUrl").val(),t=toyotaDealerLog(),$.ajax({type:"GET",url:e+"/api/DetailMain/GetCarsforCatalogue?sYear="+a,headers:{Authorization:"X-XSRF-Token "+t,"X-XSRF-Token":t,"Content-Type":"application/json"},success:function(a){var e="";if(0<a.length)for(var t=0;t<a.length;t++){var n=a[t].id,l=a[t].caT_NAME,o=a[t].caR_COUNT;e+='<p><input class="ckCat ckDeclareNew" '+(-1!=(","+i+",").indexOf(","+n+",")?"checked":"")+' value="'+n+'" id="Cat-0'+t+'" type="checkbox"><label for="Cat-0'+t+'">'+l+" ("+o+")</label></p>"}$("#tab-cars").empty(),$(e).appendTo("#tab-cars")}})}),e()});