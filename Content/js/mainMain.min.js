function youtubeid(t){var e=t.match("[\\?&]v=([^&#]*)");return null!=e&&(e=e[1]),e}$(document).ready(function(){$(".section-tmv-1 #ListStyles").on("click","span.item",function(){var t=$(this).attr("data-id");LoadCarsByStyle(t),$(".section-tmv-1 #ListStyles").find("span.item").removeClass("active"),$(this).addClass("active")}),LoadStyles=function(){var t=$("#hdApiUrl").val(),e=$("#hd__ToyotaDealerProject").val();$.ajax({url:t+"/api/DefaultMain/GetListStyles",type:"GET",headers:{Authorization:"X-XSRF-Token "+e,"X-XSRF-Token":e,"Content-Type":"application/json"},success:function(t){$(".section-tmv-1 #ListStyles").html("");var a="";a+='<span class="item active" data-id=0>Tất cả</span>',LoadCarsByStyle(0),$.each(t,function(t,e){a+='<span class="item" data-id='+e.id+">"+e.decL_NAME+"</span>"}),$(".section-tmv-1 #ListStyles").html(a)}})},LoadCarsByStyle=function(t){var s=$("#hdTestDriveLink").val(),l=$("#hdEstimateLink").val(),e=$("#hdApiUrl").val(),a=$("#hd__ToyotaDealerProject").val();$.ajax({url:e+"/api/DefaultMain/GetListCarsByStyle?idStyle="+t,type:"GET",headers:{Authorization:"X-XSRF-Token "+a,"X-XSRF-Token":a,"Content-Type":"application/json"},success:function(t){$(".section-tmv-1 #ListCars").html("");var o='<div class="slide-vehicle-tmv owl-carousel">';$.each(t,function(t,e){var a="Giá:";-1===e.caT_NAME.indexOf("Camry")&&-1===e.caT_NAME.indexOf("Fortuner")&&-1===e.caT_NAME.indexOf("Hilux")||(a="Giá từ:");var n=e.caT_SEO_URL,i=null==e.caT_SEO_URL||""==e.caT_URL?e.caT_SEO_URL:e.caT_URL;o+='<div class="item">',o+='    <div class="item__inner">',o+='        <div class="item__img">',o+='            <a href="'+i+'">',o+='                <img class="img1" src="/data/categories/'+e.id+"/"+e.caT_IMAGE1+'?width=280">',o+='                <img class="img2" src="/data/categories/'+e.id+"/"+e.caT_IMAGE2+'" />',o+="            </a>",o+="        </div>",o+='        <div class="item__txt">',o+='            <div class="item__txt__1">',o+='            <a href="'+i+'">',o+=e.caT_NAME,o+="            </a>",o+="             </div>",o+='            <div class="item__txt__3">',o+='                <span class="t31">',o+=a,o+="                </span>",o+='                <span class="t32">',o+=e.caT_FIELD1,o+="               </span>",o+='               <span class="t33">',o+="                   VND",o+="               </span>",o+="           </div>",o+='            <div class="item__txt__2">',o+='<span style="display: flex;">&#8226&nbsp;'+e.caT_DESC.replace(/\r\n/g,"</span><span style='display: flex;'>&#8226&nbsp;")+"</span>",o+="            </div>",o+='           <div class="item__txt__4">',o+='               <a href="/'+l+"?car="+i+'">Dự toán</a>',o+='                <span class="line-space">|</span>',o+='                <a href="/'+s+"?cat="+n+'">Đăng ký lái thử</a>',o+="           </div>",o+="        </div>",o+="    </div>",o+="</div>"}),o+="</div>",$(".section-tmv-1 #ListCars").html(o),hoverAndFunnySlideToyotaCarMain()}})},hoverAndFunnySlideToyotaCarMain=function(){$(".slide-vehicle-tmv").owlCarousel({loop:!1,responsiveClass:!0,dots:!1,items:3,margin:20,responsive:{0:{items:2,nav:!0},600:{items:3,nav:!0},1000:{items:4,nav:!0}}})};var r=CheckIfIsMobileNotIpad()?4:8;if(LoadNews=function(){var t=$("#hdIdlr").val(),e=$("#hdApiUrl").val(),a=$("#hd__ToyotaDealerProject").val();$.ajax({url:e+"/api/DefaultMain/GetListTechnologies?_SeoUrl=cong-nghe&idDlr="+t,type:"GET",headers:{Authorization:"X-XSRF-Token "+a,"X-XSRF-Token":a,"Content-Type":"application/json"},success:function(t){for(var e="",a="",n=0;n<t.length;n++){var i=t[n];e+='<li class="tab"><a href="#tabcn0'+(n+1)+'" >'+i.newS_TITLE+"</a></li>",a+='<div id="tabcn0'+(n+1)+'" class="content-tab"><ul class="row list-technology" >';var o=r;i.lNewsAlbum.length<r&&(o=i.lNewsAlbum.length);for(var s=0;s<o;s++){var l=i.lNewsAlbum[s],c=l.neW_IMG_TITLE;a+='<li class="item item-technology col m3 s6 '+(r-1<s?"behide":"")+'" '+(r-1<s?"style='display:none'":"")+'><div class="item__inner"><div class="item__img"><a class="open_popup_pc" data-href="#popup_pc_gallery_'+(n+1)+'" data-index="'+s+'" onclick="getLinktech('+i.neW_ID+')"><p class="videobutton"></p><img class="lazy" src="/Content/images/notfound/notfound-thumb-gallery.png?w=278&h=168&mode=crop" data-original="/data/news/'+l.neW_ID+"/1/"+l.neW_IMG_THUMB_NAME+'?w=278&h=168&mode=crop" height="168" alt="'+c+'"></a></div></li>'}a+="</ul>",a+='<p> <a href="/cong-nghe" id="xemthemcn_'+(n+1)+'" class="link-viewmore view-more-technology" isopen="false"><span>Xem thêm...</span></a> </p>',a+="</div>"}$(".section-tmv-3 #tabNewsHome1").html(e),$(".section-tmv-3 .tab-content-tmv").html(a),$("ul.tabs1").tabs(),$("img.lazy").lazyload({effect:"fadeIn",threshold:200})}})},LoadArea=function(){var t=$("#hdApiUrl").val(),e=$("#hd__ToyotaDealerProject").val();$.ajax({url:t+"/api/SearchDealers/GetListProperties?iId=0&rank=1",type:"GET",headers:{Authorization:"X-XSRF-Token "+e,"X-XSRF-Token":e,"Content-Type":"application/json"},success:function(t){$(".section-tmv-6 #AreaSelect").html("");var a="";a+='<option disabled selected value="">Khu vực</option>',$.each(t,function(t,e){a+='<option value="'+e.id+'">'+e.proP_NAME+"</option>"}),$(".section-tmv-6 #AreaSelect").html(a),$(".section-tmv-6 #AreaSelect").material_select()}})},$(".section-tmv-6 #AreaSelect").on("change",function(){var t=$(this).find(":selected").val(),e=$("#hdApiUrl").val(),a=$("#hd__ToyotaDealerProject").val();$.ajax({url:e+"/api/SearchDealers/GetListProperties?iId="+t+"&rank=2",type:"GET",headers:{Authorization:"X-XSRF-Token "+a,"X-XSRF-Token":a,"Content-Type":"application/json"},success:function(t){$(".section-tmv-6 #CitySelect").html("");var a="";a+='<option disabled selected value="">Tỉnh / Thành phố</option>',$.each(t,function(t,e){a+='<option value="'+e.id+'">'+e.proP_NAME+"</option>"}),$(".section-tmv-6 #CitySelect").html(a),$(".section-tmv-6 #CitySelect").material_select()}})}),$(".section-tmv-6 #CitySelect").on("change",function(){var t=$(this).find(":selected").val(),e=$("#hdApiUrl").val(),a=$("#hd__ToyotaDealerProject").val();$.ajax({url:e+"/api/SearchDealers/GetListProperties?iId="+t+"&rank=3",type:"GET",headers:{Authorization:"X-XSRF-Token "+a,"X-XSRF-Token":a,"Content-Type":"application/json"},success:function(t){$(".section-tmv-6 #DistrictSelect").html("");var a="";a+='<option disabled selected value="">Quận / Huyện</option>',$.each(t,function(t,e){a+='<option value="'+e.id+'">'+e.proP_NAME+"</option>"}),$(".section-tmv-6 #DistrictSelect").html(a),$(".section-tmv-6 #DistrictSelect").material_select()}})}),$(".section-tmv-6 #btnSearchDealer").on("click",function(){var t=$(".section-tmv-6 .hide-mobile #AreaSelect").find(":selected").val(),e=$(".section-tmv-6 .hide-mobile #CitySelect").find(":selected").val(),a=$(".section-tmv-6 .hide-mobile #DistrictSelect").find(":selected").val();$("html").hasClass("isMobile")&&(t=$(".section-tmv-6 .only-show-mb #AreaSelect").find(":selected").val(),e=$(".section-tmv-6 .only-show-mb #CitySelect").find(":selected").val(),a=$(".section-tmv-6 .only-show-mb #DistrictSelect").find(":selected").val()),window.location="/tim-dai-ly?areaid="+t+"&cityid="+e+"&districtid="+a}),$(".section-tmv-6 #btnContact").on("click",function(){var t=$(".section-tmv-6 #slInterested").find(":selected").val(),e=$(".section-tmv-6 #txtFullname").val(),a=$(".section-tmv-6 #txtPhone").val(),n=$(".section-tmv-6 #txtEmail").val(),i=$(".section-tmv-6 #txtContent").val();if(""!=t&&0!=t)if(""!=e&&null!=e)if(""!=a&&null!=a)if(validatePhone(a))if(0<n.length&&!validateEmail(n))showErrorbyAlert("Liên hệ","<p>Vui lòng nhập đúng định dạng email<p>","txtEmail");else{$(".section-tmv-6 #btnContact").prop("disabled",!0);var o=$("#hdApiUrl").val(),s=$("#hd__ToyotaDealerProject").val();$.ajax({url:o+"/api/ContactMain/PostContact?sInterested="+t+"&sFullName="+e+"&sEmail="+n+"&sPhone="+a+"&sAddress=&sContent="+i,type:"POST",headers:{Authorization:"X-XSRF-Token "+s,"X-XSRF-Token":s,"Content-Type":"application/json"},success:function(){}}),showSuccessbyAlert("Liên hệ","<p>Thông tin liên hệ của Quý khách đã được tiếp nhận.</p><p>Chúng tôi sẽ liên hệ Quý khách trong thời gian sớm nhất.</p><p>Xin trân trọng cảm ơn!</p>",""),$(".fancybox-close-small").click(),EmptyFormbySubmit("#toyota-contact"),$(".section-tmv-6 #slInterested").val(""),$(".section-tmv-6 #slInterested").material_select(),$(".section-tmv-6 #btnContact").prop("disabled",!1)}else showErrorbyAlert("Liên hệ","<p>Vui lòng nhập số điện thoại đúng<p>","txtPhone");else showErrorbyAlert("Liên hệ","<p>Vui lòng nhập điện thoại<p>","txtPhone");else showErrorbyAlert("Liên hệ","<p>Vui lòng nhập họ tên<p>","txtFullname");else showErrorbyAlert("Liên hệ","<p>Vui lòng chọn thông tin quý khách cần biết<p>","")}),0<$("#slideHomeContent").length){$("#slideHomeContent").data("isDragged","true");var t=$("#slideHomeContent");t.owlCarousel({margin:0,merge:!0,autoplay:!0,autoplayTimeout:5e3,autoplayHoverPause:!1,items:1,loop:!0,dots:!0,lazyLoad:!0,animateOut:"fadeOut",responsive:{0:{autoplay:!0},768:{autoplay:!0}},onDrag:function(){$("#slideHomeContent").data("isDragged",!0)}}),t.on("change.owl.carousel",function(t){(1!=t.item.index&&t.item.index-t.item.count!=1||1==$("#slideHomeContent").data("isDragged")||parseInt(t.item.count),0<$(".owl-dot.active").index()+1)&&$("#banner").find("iframe").each(function(){$(this).attr("src",$(this).attr("src"))});$("#slideHomeContent").data("isDragged",!1)});var e=$(".video-banner").find("#videobanner");if(0<e.length){var a=.5625*e.width();e.height(a)}}if(0<$(".section-tmv-1").length&&setTimeout(function(){LoadStyles()},100),0<$(".section-tmv-2").length&&0<$("#player").length)var n=youtubeid($("#hddneW_IMG_NAME_LIBRARY_VDO").val()),i=setInterval(function(){"complete"===document.readyState&&(clearInterval(i),fcyoutube(n))},100);0<$(".section-tmv-3").length&&LoadNews(),0<$(".section-tmv-5").length&&setTimeout(function(){!function(){var t=0;checkListInMobileChange()&&(t=1),$("#hdIdlr").val(),$("#hdDeAName").val();var e=$("#hdApiUrl").val(),a=($("#hdListNews").val(),e+"/api/DefaultMain/GetListNewsHome?isMobile="+t),n=toyotaDealerLog();$.ajax({type:"Get",url:a,headers:{Authorization:"X-XSRF-Token "+n,"X-XSRF-Token":n,"Content-Type":"application/json"},success:function(t){for(var e="",a="",n=0;n<t.length;n++){var i=t[n];""==i.sCatImage||(i.id,i.sCatImage),e+='<li class="tab"><a href="#tab0'+(n+1)+'" >'+i.sNameCat+"</a></li>",a+='<div id="tab0'+(n+1)+'" class="content-tab"><div class="list-news-tmv list-2"><ul class="row" >';for(var o=0;o<i.lNews.length;o++){var s=i.lNews[o],l="/tin-tuc/tin-tuc-chung/";1==n?l="/tin-tuc/tin-khuyen-mai/":2==n&&(l="/tin-tuc/tin-su-kien/");var c=null==s.newS_URL||""==s.newS_URL?l+s.newS_SEO_URL:s.newS_URL,r=s.newS_TITLE,d=s.newS_TARGET;a+='<li class="item col s3"><div class="item__inner"><div class="item__img"><a href="'+c+'" target="'+d+'"><img src="'+(""==s.caT_IMAGE?"/Content/images/notfound/notfound-images.png":"/data/categories/"+s.caT_ID+"/"+s.caT_IMAGE)+'?w=278&h=168&mode=crop" class="lazy" data-original="/data/news/'+s.id+"/"+s.newS_IMAGE3+'?w=278&h=168&mode=crop" height="168" alt="'+r+'"></a></div><div class="item__txt line-left"><h3 class="item__txt__4"><a title="'+r+'" href="'+c+'" alt="'+r+'" target="'+d+'">'+subStringSmarter(r,50," ")+'</a></h3><div class="item__txt__8">'+moment(s.newS_PUBLISHDATE).format("DD/MM/YYYY")+"</div></div></li>"}a+=0==n?'</ul><p> <a class="link-viewmore" href="/tin-tuc/tin-khuyen-mai"><span>Xem thêm...</span></a> </p></div></div>':'</ul><p> <a class="link-viewmore" href="/tin-tuc/tin-tuc-chung"><span>Xem thêm...</span></a> </p></div></div>'}$(".section-tmv-5 #tabNewsHome").html(e),$(".section-tmv-5 .tab-content-tmv").html(a),$("ul.tabs2").tabs(),$("img.lazy").lazyload({effect:"fadeIn",threshold:200})}})}()},700),0<$(".section-tmv-6").length&&setTimeout(function(){LoadArea()},900)});var fcyoutube=function(t){function e(){n.mute(),$("#player").on("mouseover",function(){n.playVideo()}),$(document).mouseout(function(t){var e=$("#player");e.is(t.target)||0!==e.has(t.target).length||n.pauseVideo()})}function a(){}try{var n;n=new YT.Player("player",{height:"322",width:"572",playerVars:{rel:0,loop:1,controls:1,showinfo:0,autohide:1,modestbranding:1,vq:"hd1080"},videoId:t,host:"https://www.youtube.com",events:{onReady:e,onStateChange:a}})}catch(t){}};